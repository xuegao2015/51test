C51 COMPILER V9.01   1602_LCD_ʾ_ң_                                           10/11/2017 09:11:40 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE 1602_LCD_ʾ_ң_
OBJECT MODULE PLACED IN 1602 LCD ʾң.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE 1602 LCD ʾң.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /**********************ZYWIFI0939C-WIFIʵ************************
   2          *  ƽ̨ZYWIFI0939C-WIFI + Keil U4 + STC89C52
   3          *  ƣZY-1Сο
   4          *  ˾ƽ豸޹˾
   5          *  Աhttps://hnzyrobot1688.taobao.com/     
   6          *  վwww.hnzhiyu.cn 
   7          *  д˾зһ
   8          *  ڣ2015-1-15
   9          *  :ܳQQ:261339276
  10          *  :11.0592MHZ
  11          *  ˵ѿԴṩԴ
  12          *  ӲãҪԼʵ
  13          *  ʹ˵IOԼöŰӸģ飬Լ޸ĸģIO
  14          *  Ƶ̳̣СѧϰCϸƵ̳̣ͳһ
  15             صʾֻοṩ֧֣Լоա
  16            ZYWIFI0939WIFIܻ˶Ű߽߷һܲջС
  17             
  18          ******************************************************************/   
  19          
  20          //#include <reg52.h>    
  21          #include <STC89C5xRC.H>
  22          #include <intrins.h>
  23          #include "LCD1602display.h"
  24          #define uint    unsigned int                          //ض޷
  25          #define uchar   unsigned char                         //ض޷ַ
  26          
  27          uchar code  LedShowData[]={0x03,0x9F,0x25,0x0D,0x99,  //ʾ
  28                                      0x49,0x41,0x1F,0x01,0x19};//0,1,2,3,4,5,6,7,8,9
  29          
  30          uchar code  RecvData[]={0x19,0x46,0x15,0x44,0x43,0x40,0x0D,0x0E,0x00,0x0F};
  31          
  32          uchar IRCOM[7];                                                                          //
  33          
  34          static unsigned int LedFlash;                         //Ƶʼ
  35          
  36          unsigned char RunFlag=0;                              //б־λ
  37          bit EnableLight=0;                                    //ָʾʹλ
  38          
  39          /*************״ָ̬ʾƶ*************/
  40          sbit S1=P3^2;                                         //S1˿
  41                                                   
  42          /*************ɵƶ˿ڶ***********/
  43          sbit M1A=P1^2;                                        //1˿
  44          sbit M1B=P1^3;                                        //1˿
  45          sbit M2A=P1^4;                                        //2˿
  46          sbit M2B=P1^5;                                        //2˿
  47          
  48          sbit SB1=P2^3;                                        //˿
  49          /*********ɻͲ,,.˿ڶ**/
  50          sbit IRIN=P3^3;                                       //ն˿
  51          /*********ɺն˿ڵĶ*************/
  52          #define ShowPort P0                                   //ʾ˿
  53          
  54          extern void ControlCar(uchar CarType);                //Сӳ
  55          
C51 COMPILER V9.01   1602_LCD_ʾ_ң_                                           10/11/2017 09:11:40 PAGE 2   

  56          void delayms(unsigned char x)                         //0.14mSʱ
  57          {
  58   1        unsigned char i;                                    //ʱ
  59   1        while(x--)                                          //ʱʱѭ
  60   1        {
  61   2          for (i = 0; i<13; i++) {}                         //14mSʱ
  62   2        }
  63   1      }
  64          
  65          
  66          void Delay()                                          //ʱӳ
  67          { uint DelayTime=30000;                               //ʱʱ
  68   1        while(DelayTime--);                                 //ʼʱѭ
  69   1        return;                                             //ӳ򷵻
  70   1      }
  71          
  72          void tingzhi()
  73          {
  74   1         M1A=0;                                   //M1A˳ʼΪ0
  75   1         M1B=0;                                   //M1B˳ʼΪ0
  76   1         M2A=0;                                   //M2A˳ʼΪ0
  77   1         M2B=0;
  78   1      
  79   1      }
  80          
  81          void qianjin()
  82          {
  83   1         M1A=1;                                   
  84   1         M1B=0;                                   
  85   1         M2A=1;                                   
  86   1         M2B=0;
  87   1      }
  88          
  89          void houtui()
  90          {
  91   1         M1A=0;                                   
  92   1         M1B=1;                                   
  93   1         M2A=0;                                   
  94   1         M2B=1;
  95   1      }
  96          
  97          void youzhuan()
  98          {
  99   1         M1A=1;                                   
 100   1         M1B=0;                                   
 101   1         M2A=0;                                   
 102   1         M2B=1;
 103   1      
 104   1      }
 105          
 106          void zuozhuan()
 107          {
 108   1         M1A=0;                                   
 109   1         M1B=1;                                   
 110   1         M2A=1;                                   
 111   1         M2B=0;
 112   1      
 113   1      }
 114          
 115          void ControlCar(unsigned char ConType)    //ӳ
 116          {
 117   1       
C51 COMPILER V9.01   1602_LCD_ʾ_ң_                                           10/11/2017 09:11:40 PAGE 3   

 118   1        tingzhi();
 119   1       switch(ConType)                          //жû趨ʽ
 120   1       {
 121   2        case 1:  //ǰ                         //жûǷѡʽ1
 122   2        { 
 123   3          
 124   3              tingzhi();                                                    //ǰ֮ǰ ֹͣһʱ  ֹѹ ϵͳλ
 125   3               Delay1ms(240);
 126   3              qianjin();
 127   3              ShowPort=LedShowData[1];
 128   3          break;
 129   3        }
 130   2        case 2: //                              //жûǷѡʽ2
 131   2        { 
 132   3          tingzhi();                                                        //֮ǰ ֹͣһʱ  ֹѹ ϵͳλ
 133   3                Delay1ms(240);
 134   3      //      LeftLed = 1 ;    
 135   3              houtui();
 136   3              ShowPort=LedShowData[2];                                //M2ת
 137   3          break;
 138   3        }
 139   2        case 3: //ת                              //жûǷѡʽ3
 140   2        { 
 141   3          tingzhi();                                                            //ת֮ǰ ֹͣһʱ  ֹѹ ϵͳλ
 142   3               Delay1ms(240); 
 143   3              zuozhuan(); 
 144   3              ShowPort=LedShowData[3];                              //M2ת
 145   3              break;
 146   3        }
 147   2        case 4: //ת                              //жûǷѡʽ4
 148   2        { 
 149   3          tingzhi();                                                            //ת֮ǰ ֹͣһʱ  ֹѹ ϵͳλ
 150   3                Delay1ms(240);
 151   3              youzhuan();                                //M1ת
 152   3          ShowPort=LedShowData[4];                                      //M2ת
 153   3              break;
 154   3        }
 155   2        case 5: //ֹͣ                          //жûǷѡʽ8
 156   2        {
 157   3          tingzhi();
 158   3              ShowPort=LedShowData[0]; 
 159   3              break; 
 160   3                                            //˳ǰѡ
 161   3        }
 162   2       }
 163   1      }
 164          
 165          void IR_IN() interrupt 2 using 0                      //INT2ⲿжϺ
 166          {
 167   1        unsigned char j,k,N=0;                              //ʱձ
 168   1         
 169   1        EX1 = 0;                                            //رⲿж,ֹźŵ   
 170   1        delayms(15);                                        //ʱʱ䣬к
 171   1        if (IRIN==1)                                        //жϺźǷʧ
 172   1        {  
 173   2           EX1 =1;                                          //ⲿжϿ
 174   2               return;                                          //
 175   2        } 
 176   1                                 
 177   1        while (!IRIN)                                       //IRΪߵƽ9msǰ͵ƽźš
 178   1        {
 179   2            delayms(1);                                     //ʱȴ
C51 COMPILER V9.01   1602_LCD_ʾ_ң_                                           10/11/2017 09:11:40 PAGE 4   

 180   2        }
 181   1      
 182   1        for (j=0;j<4;j++)                                   //ɼң
 183   1        { 
 184   2          for (k=0;k<8;k++)                                 //ִβɼ8λ
 185   2          {
 186   3             while (IRIN)                                   // IR Ϊ͵ƽ4.5msǰߵƽźš
 187   3             {
 188   4               delayms(1);                                  //ʱȴ
 189   4             }
 190   3             
 191   3             while (!IRIN)                                  // IR Ϊߵƽ
 192   3             {
 193   4               delayms(1);                                  //ʱȴ
 194   4             }
 195   3         
 196   3             while (IRIN)                                   //IRߵƽʱ
 197   3             {
 198   4               delayms(1);                                  //ʱȴ
 199   4               N++;                                         //Ӽ
 200   4               if (N>=30)                                   //жϼۼֵ
 201   4                   { 
 202   5                 EX1=1;                                     //ⲿжϹ
 203   5                     return;                                    //
 204   5               }                   
 205   4             }
 206   3                                             
 207   3            IRCOM[j]=IRCOM[j] >> 1;                         //λƲԶ
 208   3           
 209   3            if (N>=8)                                       //жݳ 
 210   3            {
 211   4               IRCOM[j] = IRCOM[j] | 0x80;                  //λ1
 212   4            } 
 213   3            N=0;                                            //λ¼
 214   3          }
 215   2        }
 216   1         
 217   1        if (IRCOM[2]!=~IRCOM[3])                            //жϵַǷͬ
 218   1        { 
 219   2           EX1=1;                                           //ⲿж
 220   2           return;                                          //
 221   2        }
 222   1        DisplayListChar(0, 0, IRCOM);
*** WARNING C259 IN LINE 222 OF 1602 LCD ʾң.C: 'parameter': pointer: different mspace
 223   1      
 224   1        for(j=0;j<10;j++)                                   //ѭм
 225   1         {
 226   2                if(IRCOM[2]==RecvData[j])                       //мλӦ
 227   2            {
 228   3             // ControlCar(j);                                          //ʾӦ
 229   3            }
 230   2         }
 231   1         
 232   1         
 233   1         EX1 = 1;                                           //ⲿжϿ 
 234   1      } 
 235          
 236          void main(void)                                       //
 237          {
 238   1       bit ExeFlag=0;                                       //ִλ
 239   1       
 240   1       LedFlash=3000;                                       //ݽгʼ
C51 COMPILER V9.01   1602_LCD_ʾ_ң_                                           10/11/2017 09:11:40 PAGE 5   

 241   1       EX1=1;                                               //ͬ⿪ⲿж1
 242   1       IT1=1;                                               //趨ⲿж1ΪͱԵ
 243   1       EA=1;                                                //жϿ
 244   1       ShowPort=LedShowData[0];                             //ʾ0
 245   1      while(1)                                              //ѭ
 246   1       {
 247   2         
 248   2         Delay();                                           //ʱ
 249   2        // RunStopState=~RunStopState;                        //ָʾ״̬ת
 250   2        
 251   2       }
 252   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    673    ----
   CONSTANT SIZE    =     20    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     10      10
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1       1
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
